(()=>{"use strict";const e=(()=>{const r=()=>null!==localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{name:"All tasks",color:"#5d9963",details:"Find all tasks here",relatedTasks:e.getTasks()}],s=()=>null!==localStorage.getItem("tasks")?JSON.parse(localStorage.getItem("tasks")):[],o=e=>{const t=s();t.push(e),localStorage.setItem("tasks",JSON.stringify(t))},n=e=>{const t=s();t.splice(i(e),1),localStorage.setItem("tasks",JSON.stringify(t))},c=()=>null!==localStorage.getItem("done tasks")?JSON.parse(localStorage.getItem("done tasks")):[],l=e=>{const t=c();t.push(e),localStorage.setItem("done tasks",JSON.stringify(t))},d=e=>{const t=c();t.splice(m(e),1),localStorage.setItem("done tasks",JSON.stringify(t))},i=t=>e.getTasks().map((e=>e.title)).findIndex((e=>e==t.title)),m=t=>e.getDoneTasks().map((e=>e.title)).findIndex((e=>e==t.title));return{getTasks:s,addTask:o,deleteTask:n,getProjects:r,addProject:e=>{const t=r();t.push(e),localStorage.setItem("projects",JSON.stringify(t))},getDoneTasks:c,addDoneTask:l,deleteDoneTask:d,changeToDoneList:e=>{n(e),l(e)},changeToAllTasksList:e=>{d(e),o(e)},deleteProject:o=>{const c=r();var l,d;c.splice((d=o,e.getProjects().map((e=>e.name)).findIndex((e=>e==d.name))),1),l=o.name,s().forEach((e=>{e.projectID==l&&n(e)})),a.displayProjectList(r()[0],t.filterTasks(r()[0])),localStorage.setItem("projects",JSON.stringify(c))}}})(),t=(()=>{const t=()=>{const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getFullYear());return{dayOfWeek:e.getDay(),day:t,month:a,year:r,currentDate:`${r}-${a}-${t}`}};return{createNewProject:(t,r,s)=>{const o=((e,t,a)=>({name:e,color:t,details:a,relatedTasks:[]}))(t,r,s),n=document.querySelector(".projects-list");var c;a.displayElement(o,n),"All tasks"!==t&&(c=o,e.addProject(c))},filterTasks:t=>"All tasks"===t.name?e.getTasks():e.getTasks().filter((e=>{if(1!==e.status)return e.projectID===t.name})),deleteTask:(t,r)=>{e.deleteTask(r),a.removeTaskFromDisplay(t)},checkTask:(t,r)=>{e.changeToDoneList(r),a.removeTaskFromDisplay(t)},uncheckTask:(t,r)=>{e.changeToAllTasksList(r),a.removeTaskFromDisplay(t)},getCurrentDate:t,filterTodayTasks:()=>e.getTasks().filter((e=>{if(-1!==e.status)return e.date===t().currentDate})),getReadableDate:()=>`${(()=>{let e="";switch(t().dayOfWeek){case 0:e="Sunday";break;case 1:e="Monday";break;case 2:e="Tuesday";break;case 3:e="Wednesday";break;case 4:e="Thursday";break;case 5:e="Friday";break;case 6:e="Saturday"}return e})()}, ${t().day} ${(()=>{let e="";switch(t().month){case"01":e="Jan";break;case"02":e="Feb";break;case"03":e="Mar";break;case"04":e="Apr";break;case"05":e="May";break;case"06":e="Jun";break;case"07":e="Jul";break;case"08":e="Aug";break;case"09":e="Sep";break;case"10":e="Oct";break;case"11":e="Nov";break;case"12":e="Dec"}return e})()} ${t().year}`}})(),a=(()=>{const e=(e,t)=>{const a=document.querySelector("#main"),r=document.createElement("div");void 0===t?r.classList.add("task-item",e.prior):r.classList.add("task-item",e.prior,t),r.innerHTML=`\n            <div class="check-btn btn-pointer"></div>\n            <div class="main-task-infos">\n                <div class="task-title">${e.title}</div>\n                <div class="details">${e.desc}</div>\n            </div>\n            <div class="date">${e.date}</div>\n            <div class="delete-btn btn-pointer"></div>\n        `,r.objectAssign=e,a.prepend(r)};return{openForm:(e,t)=>{if("project"===e){const e=document.querySelector("#overlay-project");e.classList.add("show-overlay"),e.innerHTML='\n        <form class="create-new">\n            <div class="create-new--header">Create a new project<div id="close-form-btn"></div></div>\n            <div class="create-new--content">\n                <label for="new-project--name">Project Name:</label>\n                <input type="text" id="new-project--name" name="new-project" required>\n                <label for="new-project--desc">Details:</label>\n                <textarea id="new-project--desc" name="new-project" maxlength="80"></textarea>\n                <div class="wrap-priority-submit">\n                    <div>\n                        <label for="new-project--color">Color:</label>\n                        <input type="color" id="new-project--color" name="new-project" required>\n                    </div>\n                    <button>Create</button>\n                </div>\n            </div>\n        </form>\n'}else if("task"===e){const e=document.querySelector("#overlay-task");e.classList.add("show-overlay"),e.innerHTML='\n    <form class="create-new">\n        <div class="create-new--header">Create a new task<div id="close-form-btn"></div></div>\n        <div class="create-new--content">\n            <textarea class="create-new_input" id="new-todo--title" name="new-todo" placeholder="Title: Create a title" required></textarea>\n            <textarea class="create-new_input" id="new-todo--description" name="new-todo" placeholder="Details: Add a description" required></textarea>\n            <div class="create-new_date">\n                <label for="new-todo--date">Due Date:</label>\n                <input type="date" id="new-todo--date" name="new-todo" required>\n            </div>\n            <div class="wrap-priority-submit">\n                <div class="new-todo--priority">\n                    <div class="todo-prior-label">Priority:</div>\n                    <label class="radio-label radio-label-low" for="low"><span class="low">low</span>\n                        <input type="radio" id="low" name="new-todo--prior" value="priority-low" required>\n                    </label>\n                    <label class="radio-label radio-label-medium" for="medium"><span class="medium">medium</span>\n                        <input type="radio" id="medium" name="new-todo--prior" value="priority-medium" required>\n                    </label>\n                    <label class="radio-label radio-label-high" for="high"><span class="high">high</span>\n                        <input type="radio" id="high" name="new-todo--prior" value="priority-high" required>\n                    </label>\n                </div>\n                <button>Create</button>\n            </div>\n        </div>\n    </form>\n',e.relatedProject=t}},closeForm:e=>{if("project"===e){const e=document.querySelector("#overlay-project");e.classList.remove("show-overlay"),e.innerHTML=""}else if("task"===e){const e=document.querySelector("#overlay-task");e.classList.remove("show-overlay"),e.innerHTML=""}},displayElement:(e,t)=>{t.appendChild((e=>{const t=document.createElement("li");return t.classList.add("project-item","btn-pointer"),t.obj_ID=e,t.innerHTML=`<div class= "project-color" style="background: ${e.color}"></div>${e.name}<div class="delete-project-btn"></div>`,t})(e))},displayProjectList:(t,a,r)=>{const s=document.querySelector(".chosen-list-title"),o=document.querySelector(".project-details"),n=document.querySelector("#header");s.textContent=t.name,o.textContent=t.details,n.style.backgroundColor=t.color,((e,t)=>{if(document.querySelector("#main").innerHTML="",void 0===t){const t=document.createElement("div");t.classList.add("new-task-card","btn-pointer"),t.innerHTML='<img class="new-task-btn" src="./assets/add.png" alt="plus icon">Add a Task',t.relatedProject=e,document.querySelector("#main").appendChild(t)}})(t,r),((t,a)=>{t.forEach((t=>{e(t,a)}))})(a,r)},addTaskToList:e,removeTaskFromDisplay:e=>{document.querySelector("#main").removeChild(e)},removeProjectFromDisplay:e=>{document.querySelector(".projects-list").removeChild(e)}}})();document.querySelector("#overlay-project").addEventListener("submit",(e=>{e.preventDefault();const r=document.querySelector("#new-project--name").value,s=document.querySelector("#new-project--color").value,o=document.querySelector("#new-project--desc").value;t.createNewProject(r,s,o),a.closeForm("project")})),document.querySelector("#overlay-task").addEventListener("submit",(t=>{t.preventDefault();const r=document.querySelector("#overlay-task").relatedProject,s=(o=document.querySelector("#new-todo--title").value,n=document.querySelector("#new-todo--description").value,c=document.querySelector("#new-todo--date").value,l=document.querySelector('input[type="radio"]:checked').value,d=r.name,{title:o,desc:n,date:c,prior:l,projectID:d});var o,n,c,l,d;a.addTaskToList(s),e.addTask(s),a.closeForm("task")})),document.addEventListener("DOMContentLoaded",(()=>{e.getProjects().forEach((e=>{a.displayElement(e,document.querySelector(".projects-list"))})),a.displayProjectList(e.getProjects()[0],t.filterTasks(e.getProjects()[0]))})),document.querySelector(".new-list-btn").addEventListener("click",(()=>{a.openForm("project")})),document.querySelector("#overlay-project").addEventListener("click",(e=>{"close-form-btn"===e.target.id&&a.closeForm("project")})),document.querySelector("#overlay-task").addEventListener("click",(e=>{"close-form-btn"===e.target.id&&a.closeForm("task")})),document.addEventListener("click",(e=>{e.target.classList.contains("new-task-card")&&a.openForm("task",e.target.relatedProject)})),document.querySelector(".projects-list").addEventListener("click",(e=>{e.target.classList.contains("project-item")&&a.displayProjectList(e.target.obj_ID,t.filterTasks(e.target.obj_ID))})),document.querySelector("#done-tasks").addEventListener("click",(()=>{a.displayProjectList({name:"Done tasks",details:"All done tasks",color:"#5d9963"},e.getDoneTasks(),"done-task")})),document.querySelector("#my-day-tasks").addEventListener("click",(()=>{a.displayProjectList({name:"Today tasks",details:t.getReadableDate(),color:"#5d9963"},t.filterTodayTasks(),"today-task")})),document.addEventListener("click",(t=>{t.target.classList.contains("delete-btn")&&(t.target.parentElement.classList.contains("done-task")?(a.removeTaskFromDisplay(t.target.parentElement),e.deleteDoneTask(t.target.parentElement.objectAssign)):(a.removeTaskFromDisplay(t.target.parentElement),e.deleteTask(t.target.parentElement.objectAssign)))})),document.addEventListener("click",(t=>{t.target.classList.contains("delete-project-btn")&&(a.removeProjectFromDisplay(t.target.parentElement),e.deleteProject(t.target.parentElement.obj_ID))})),document.addEventListener("click",(e=>{e.target.classList.contains("check-btn")&&(e.target.parentElement.classList.contains("done-task")?t.uncheckTask(e.target.parentNode,e.target.parentNode.objectAssign):t.checkTask(e.target.parentNode,e.target.parentNode.objectAssign))}))})();